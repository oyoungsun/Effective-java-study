# 아이템5. 자원을 직접 명시하지 말고 의존 객체 주입을 사용하라

## 자원에 의존하는 클래스
클래스는 자원에 의존한다. 이러한 자원은 동적 자원일 수도, 정적 자원일 수도 있다.\
자원은 클래스 동작에 영향에 줄 수도 있다.\
[아이템4](item 4_인스턴스화를 막으려거든 private 생성자를 사용하라/오영선.md)에서 제시된 정적 유틸리티 클래스, 싱글턴 클래스를 생각해보자.\
다음은 복권의 번호가 정상적인 길이인지 검사하는 싱글톤 클래스 ```LottoChecker```이다.
```java
public class LottoChecker{
   private final static int lottoLength = 6; //로또의 길이
   
   private LottoChecker(...){}
   
   public boolean isValid(Lotto given){...} //복권 번호가 유효한지
}
```
- 이러한 경우에는 다양한 장점이 있지만, 단점으로 **유연하지 않고 테스트가 어렵다**는 점이 있다.
- 유연하지 않다 : 우리나라에는 4가지의 복권 종류가 있는데, 각각의 복권의 숫자 길이, 패턴은 다르다.

> 사용하는 자원에 따라 동작이 달라지는 클래스에서는 정적 유틸리티 클래스나 싱글턴이 적합하지 않다.
- 클래스가 여러 자원 인스턴스를 지원하며, 클라이언트는 원하는 자원을 사용할 수 있다.
### 인스턴스 생성시 생성자에 필요한 자원을 넘겨주기 _Dependency Injection, DI_
- 의존 객체 주입의 형태이다.
```java
public class LottoChecker{
   private final static int lottoLength; //로또의 길이
   
   public LottoChecker(int lottoLength){
       this.lotto = lottoLength; // 생성자에 필요한 자원을 넘겨준다.
   }
   public boolean isValid(Lotto given){...} //복권 번호가 일치하는지 판단하는 함수
}
```
- 자원이 몇 개이든, 의존관계가 어떻든 상관없이 작동 가능하다.
- 불변을 보장한다.
- 생성자, 정적팩터리, 빌더에 모두 적용 가능한 방식이다.
- 예시로는 단순한 숫자, 규칙을 주었지만, 생성자에 자원 팩터리를 넘겨주도록 응용할 수 있다. (Supplier<T>)

### 의존 객체 주입 프레임워크 - Spring, Dagger, Guice
- 의존 객체 주입이 유연성과 테스트 용이성을 주지만, 코드를 복잡하게 만든다는 특징이 있다.
- 이러한 프레임워크를 활용해 코드의 간결성을 유지할 수 있다.